[![Python](https://img.shields.io/badge/-Python-464646??style=flat-square&logo=Python)](https://www.python.org/)
[![Django](https://img.shields.io/badge/-Django-464646??style=flat-square&logo=Django)](https://www.djangoproject.com/)
# API для сервиса терминологии

## Описание
Сервис терминологии оперирует ниже перечисленными сущностями.

### Сущность "Справочник" содержит следующие атрибуты:

- идентификатор справочника (глобальный и не зависит от версии)
- наименование
- короткое наименование
- описание
- версия (тип: строка, не может быть пустой, уникальная в пределах одного справочника)
- дата начала действия справочника этой версии

### Сущность "Элемент справочника"

- идентификатор
- родительский идентификатор
- код элемента (тип: строка, не может быть пустой)
- значение элемента (тип: строка, не может быть пустой)

## Возможности:
- получение списка справочников.
- получение списка справочников, актуальных на указанную дату.
- получение элементов заданного справочника текущей версии
- валидация элементов заданного справочника текущей версии
- получение элементов заданного справочника указанной версии
- валидация элемента заданного справочника по указанной версии

В API предусмотрен постраничный вывод результата (данные возвращаются частями по 10 элементов).

Доступ к GUI административной части для добавления новых справочников, новых версий справочников,
указания даты начала действия, заполнение справочников элементами - /admin

## Установка:
1. Клонируйте репозиторий на локальную машину.
- ``git clone https://github.com/da-semenov/komtek``
2. Установите виртуальное окружение
- ``python -m venv venv``
3. Активируйте виртуальное окружение.
- ``source venv/Scripts/activate``
4. Установите зависимости.
- ``pip install -r requirements.txt``
5. Выполните миграции.
- ``python manage.py migrate``
6. Создайте суперпользователя.
- ``python manage.py createsuperuser``
7. Запустите локальный сервер.
- ``python manage.py runserver``
8. Получите JWT-токен. Выполните POST-запрос передав поля username и password
- ``/auth/jwt/create/``
   Токен вернётся в поле access, а данные из поля refresh пригодятся для обновления токена.
9. При отправке запросов передавайте токен в заголовке Authorization: Bearer <токен>
   (Нужно изменить значение в settings.py-это настройка уровня доступа)
   REST_FRAMEWORK = {
      'DEFAULT_PERMISSION_CLASSES': [
         'rest_framework.permissions.IsAuthenticatedOrReadOnly',
      ], 

## Доступные эндпоинты:
```
GET           /catalogs/                                                         - получение списка справочников 
GET           /catalogs/?date=yyyy-mm-dd                                         - получение списка справочников, актуальных на указанную дату 
GET           /elements/?catalog=%name                                           - получение элементов заданного справочника текущей версии
GET           /elements/?catalog=%name&version=%version                          - получение элементов заданного справочника указанной версии
GET           /validate/?catalog=%name&code=%code&value=%value                   - валидация элементов заданного справочника текущей версии
GET           /validate/?catalog=%name&version=%version&code=%code&value=%value  - валидация элементов заданного справочника по указанной версии
```
Для получения списка справочников, актуальных на указанную дату требуется подставить дату в формате yyyy-mm-dd. 
Для получения элементов справочника необходимо подставлять наименование и версию справочника.
Для валидации необходимо указывать название справочника, код и значение.
Версия справочника должна быть в формате: `1`, `2.0`, `1.0.1`, `11.22.34`

## Документация:
```
GET                       /swagger           - Swagger
GET                       /redoc             - Redoc
```

## Админка для добавления и изменения справочников и элементов
`` http://127.0.0.1:8000/admin/``

## Основные использованные технологии
* [python 3.8](https://www.python.org/)
* [django 3.2](https://www.djangoproject.com/)
* [drf 3.12](https://www.django-rest-framework.org/)
* [swagger](https://swagger.io/)
* [redoc](https://redoc.ly/redoc/)
* [postman](https://www.postman.com/)

## Автор
* **Семенов Денис** - [da-semenov](https://github.com/da-semenov)
